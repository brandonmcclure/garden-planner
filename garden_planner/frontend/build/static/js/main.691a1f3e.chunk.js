(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{126:function(t,e,n){},127:function(t,e,n){},128:function(t,e,n){t.exports=n.p+"static/media/redo.d2107f44.svg"},131:function(t,e,n){"use strict";n.r(e);var a=n(9),r=n(10),i=n(18),o=n(15),c=n(31),s=n(17),l=n(0),u=n.n(l),d=n(13),h=n.n(d),f=(n(51),n(85),n(139)),m=n(138),p=(n(33),function(t){function e(){return Object(a.a)(this,e),Object(i.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return u.a.createElement(f.a,{expand:"md",className:"bg-pastel-green"},u.a.createElement(f.a.Brand,{href:"#home"},"Penny's Garden Planner"),u.a.createElement(f.a.Toggle,{"aria-controls":"navbar-actions"}),u.a.createElement(f.a.Collapse,{id:"navbar-actions"},u.a.createElement(m.a,{className:"mr-auto",activeKey:"#home"},u.a.createElement(m.a.Link,{href:"#home"},"Designer"),u.a.createElement(m.a.Link,{href:"#features"},"About"),u.a.createElement(m.a.Link,{href:"#pricing"},"Contact"))))}}]),e}(u.a.Component));n(94);var v=function(){return u.a.createElement("div",null,u.a.createElement(p,null),u.a.createElement(mt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=n(21),b=n.n(g),y=n(47),k=n.n(y),w=n(77),E=n.n(w),O=n(78),j=n.n(O),C=n(39),P=n.n(C),N=n(26),S=n(65),R=n.n(S),G=n(48),x=n.n(G),A=n(32),L=n.n(A),H=n(30),B=n.n(H),F=[],I=function(){function t(e){Object(a.a)(this,t),this.id=e.id,this.rows=e.rows,this.cols=e.cols,this.fill=e.fill,this.styles={display:"grid",gridTemplateRows:"repeat(".concat(e.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(e.cols,", 1fr)"),position:"absolute",top:0,left:0,width:"100%",height:"100%"};for(var n=[],r=0;r<e.rows;r++)for(var i=0;i<e.cols;i++)n.push([r,i]);this.allPoints=n;var o=e.fill.map(JSON.stringify);this.cellFilledStates=n.map((function(t){return!!o.includes(JSON.stringify(t))}))}return Object(r.a)(t,null,[{key:"getObject",value:function(t){return F.find((function(e){return e.id==t}))}},{key:"allObjects",value:function(){return F}},{key:"loadObjectsFromApi",value:function(){fetch("/backend/layouts/").then((function(t){return 200===t.status?t.json():null})).then((function(e){e&&e.forEach((function(e){return F.push(new t(e))}))}))}}]),t}(),D=[],_=function(){function t(e){Object(a.a)(this,t),this.id=e.id,this.name=e.name,this.namePlural=e.name_plural,this.scientificName=e.scientific_name,this.layoutIds=e.layouts,this.goodNeighborIds=e.good_neighbors,this.badNeighborIds=e.bad_neighbors,this.className=e.name.toLowerCase().replace(/ /g,"-"),this.imageName=e.name.toLowerCase().replace(/ /g,"-"),this.defaultLayout=this.defaultLayout.bind(this)}return Object(r.a)(t,[{key:"defaultLayout",value:function(){return I.getObject(this.layoutIds[0])}}],[{key:"getObject",value:function(t){return D.find((function(e){return e.id==t}))}},{key:"allObjects",value:function(){return D}},{key:"loadObjectsFromApi",value:function(){fetch("/backend/plants/").then((function(t){return 200===t.status?t.json():null})).then((function(e){e&&e.forEach((function(e){return D.push(new t(e))}))}))}}]),t}(),T=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(i.a)(this,Object(o.a)(e).call(this,t))).state={currentPlantGroup:Object.keys(t.plantGroups)[0]},n}return Object(s.a)(e,t),Object(r.a)(e,[{key:"renderPlantList",value:function(){var t=this,e=this.state.currentPlantGroup?this.props.plantGroups[this.state.currentPlantGroup]:[];return u.a.createElement(B.a,null,e.sort((function(t,e){return t.namePlural.localeCompare(e.namePlural)})).map((function(e){return u.a.createElement(B.a.Item,{action:!0,key:e.id,onClick:function(){return t.props.handleSelect(e,e.defaultLayout())}},u.a.createElement("div",{className:"".concat(e.className," bg-icon-right")},e.namePlural))})))}},{key:"renderFilters",value:function(){var t=this;if(1===Object.keys(this.props.plantGroups).length)return null;var e={all:"All",good:"Good with neighbors",neutral:"Neutral",bad:"Bad with neighbors"};return u.a.createElement("div",{className:"mb-2"},u.a.createElement(R.a,{type:"radio",name:"currentPlantGroupFilter",value:this.state.currentPlantGroup,onChange:function(e){t.setState({currentPlantGroup:e})},className:"bg-light"},Object.entries(this.props.plantGroups).map((function(t){var n=Object(N.a)(t,2),a=n[0];n[1];return u.a.createElement(x.a,{size:"sm",className:"text-left",variant:"outline-secondary",value:a,key:a},e[a])}))))}},{key:"render",value:function(){return u.a.createElement(L.a,{show:this.props.show,onHide:this.props.handleHide,scrollable:!0},u.a.createElement(L.a.Header,{closeButton:!0,className:"bg-pastel-green"},"Plant Picker"),u.a.createElement(L.a.Body,null,this.renderFilters(),this.renderPlantList()))}}]),e}(u.a.Component),q=(n(126),n(127),n(66)),z=n.n(q),J=n(67),M=n.n(J),W=n(68),K=n.n(W),U=n(69),Y=n.n(U),$=n(70),Q=n.n($),V=n(71),X=n.n(V),Z=n(72),tt=n.n(Z),et=n(73),nt=n.n(et),at=n(74),rt=n.n(at),it=n(75),ot=n.n(it),ct=n(76),st=n.n(ct);z.a,M.a,K.a,Y.a,Q.a,X.a,tt.a,nt.a,rt.a,ot.a,st.a;var lt=function(t){function e(t){return Object(a.a)(this,e),Object(i.a)(this,Object(o.a)(e).call(this,t))}return Object(s.a)(e,t),Object(r.a)(e,[{key:"renderPlants",value:function(){var t=this;if(this.props.plant){var e=function(t,e){return{gridArea:"".concat(t+1," / ").concat(e+1," / auto / auto")}};return this.props.layout.fill.map((function(n,a){var r=Object(N.a)(n,2),i=r[0],o=r[1];return u.a.createElement("div",{className:"plant",style:e(i,o),key:a},u.a.createElement("div",{className:"bg ".concat(t.props.plant.className)}))}))}return null}},{key:"render",value:function(){return u.a.createElement("button",{className:"plot",id:this.props.id,onClick:this.props.onClick},u.a.createElement("div",{className:"plants",style:this.props.layout?this.props.layout.styles:null},this.renderPlants()))}}]),e}(u.a.Component),ut=n(49),dt=n.n(ut),ht=(n(128),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(a.a)(this,t),this.plant=e,this.layout=n,this.plantPickerOptionGroups=this.plantPickerOptionGroups.bind(this)}return Object(r.a)(t,[{key:"plantPickerOptionGroups",value:function(t){var e={},n=new Set,a=new Set,r=new Set;return 0===t.length?_.allObjects().forEach((function(t){return n.add(t.id)})):(_.allObjects().forEach((function(t){return a.add(t.id)})),t.forEach((function(t){t.goodNeighborIds.forEach((function(t){a.delete(t),n.add(t)}))})),t.forEach((function(t){t.badNeighborIds.forEach((function(t){a.delete(t),n.delete(t),r.add(t)}))}))),[["good",n],["neutral",a],["bad",r]].forEach((function(t){var n=Object(N.a)(t,2),a=n[0],r=n[1];r.size>0&&(e[a]=Array.from(r).map((function(t){return _.getObject(t)})))})),e}}]),t}()),ft=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(i.a)(this,Object(o.a)(e).call(this,t))).state={numRows:4,numCols:4,grid:Array(4).fill().map((function(t){return new Array(4).fill().map((function(t){return new ht}))})),showPlantPicker:!1},n.addRow=n.addRow.bind(Object(c.a)(n)),n.handleGridClick=n.handleGridClick.bind(Object(c.a)(n)),n.clickedRow=null,n.clickedCol=null,n.history=[],n}return Object(s.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){_.loadObjectsFromApi(),I.loadObjectsFromApi()}},{key:"renderUndo",value:function(){var t=this;if(0===this.history.length)return u.a.createElement(b.a,{variant:"outline-secondary",className:"disabled",disabled:!0},u.a.createElement("img",{src:dt.a}));return u.a.createElement(b.a,{variant:"outline-secondary",onClick:function(){t.undo()}},u.a.createElement("img",{src:dt.a}))}},{key:"undo",value:function(){var t=this.history.pop();this.setState((function(e){return{grid:t}}))}},{key:"renderHeader",value:function(){var t=this;return u.a.createElement(E.a,{"aria-label":"Controls"},u.a.createElement(k.a,{className:"mx-2","aria-label":"Add rows and columns"},u.a.createElement(b.a,{variant:"outline-success",size:"sm",className:"mr-0",onClick:function(){t.addRow()}},"Add Row"),u.a.createElement(b.a,{variant:"outline-success",size:"sm",className:"mr-0",onClick:function(){t.addCol()}},"Add Column")))}},{key:"renderBody",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{id:"gridContainer",style:this.gridContainerDynamicStyles()},u.a.createElement("div",{id:"grid",style:this.gridDynamicStyles()},this.gridSquares())))}},{key:"gridSquares",value:function(){for(var t=[],e=0;e<this.state.numRows;e++)for(var n=0;n<this.state.numCols;n++)t.push(this.renderSquare(e,n));return t}},{key:"gridContainerDynamicStyles",value:function(){var t,e;return console.log("windowheight",window.innerHeight),console.log("windowwidth",window.innerWidth),window.innerHeight>window.innerWidth||this.state.numCols>this.state.numRows?(t="vw",e=Math.floor(70/this.state.numCols)):(t="vh",e=Math.floor(70/this.state.numRows)),e=Math.max(e,23),{width:"".concat(this.state.numCols*e).concat(t),height:"".concat(this.state.numRows*e).concat(t)}}},{key:"gridDynamicStyles",value:function(){return{gridTemplateRows:"repeat(".concat(this.state.numRows,", 1fr)"),gridTemplateColumns:"repeat(".concat(this.state.numCols,", 1fr)")}}},{key:"renderSquare",value:function(t,e){var n=this,a="r".concat(t,"c").concat(e),r=this.state.grid[t][e];return u.a.createElement(lt,{key:a,id:a,plant:r.plant,layout:r.layout,onClick:function(){n.handleGridClick(t,e)}})}},{key:"getGridCopy",value:function(){return this.state.grid.map((function(t){return t.slice()}))}},{key:"handleGridClick",value:function(t,e){this.clickedRow=t,this.clickedCol=e,this.setState({showPlantPicker:!0})}},{key:"addRow",value:function(){console.log("history",this.history),this.setState((function(t){return{numRows:t.numRows+1,grid:t.grid.concat([new Array(t.numCols).fill().map((function(t){return new ht}))])}}))}},{key:"delRow",value:function(t){this.setState((function(e){return{numRows:e.numRows-1,grid:e.grid.splice(t,1)}}))}},{key:"addCol",value:function(){this.setState((function(t){return{numCols:t.numCols+1,grid:t.grid.map((function(t){return t.slice().concat([new ht])}))}}))}},{key:"handlePlantPickerSelection",value:function(t,e){var n=this.state.grid.map((function(t){return t.slice()})),a=n[this.clickedRow][this.clickedCol];Object.assign(a,{plant:t,layout:e}),this.clickedRow=null,this.clickedCol=null,this.setState({grid:n,showPlantPicker:!1})}},{key:"renderPlantPicker",value:function(){var t=this;if(!1===this.state.showPlantPicker)return null;var e=this.clickedRow,n=this.clickedCol,a=function(e,n){return t.state.grid[e][n].plant},r=[];[e-1,e,e+1].forEach((function(i){[n-1,n,n+1].forEach((function(o){(function(a,r){return a>=0&&a<t.state.numRows&&r>=0&&r<t.state.numCols&&"".concat(a,"_").concat(r)!=="".concat(e,"_").concat(n)})(i,o)&&a(i,o)&&r.push(a(i,o))}))}));var i=this.state.grid[e][n].plantPickerOptionGroups(r);return u.a.createElement(T,{show:!0,handleSelect:function(e,n){t.handlePlantPickerSelection(e,n)},handleHide:function(){t.setState({showPlantPicker:!1})},plantGroups:i,neighborPlants:r})}},{key:"render",value:function(){return u.a.createElement(j.a,{fluid:!0,className:"mt-2 p-1"},this.renderPlantPicker(),u.a.createElement(P.a,{className:"h-75"},u.a.createElement(P.a.Header,null,this.renderHeader()),u.a.createElement(P.a.Body,{className:"align-content-center m-2 overflow-auto p-0",style:{maxHeight:"70vh",overflowY:"auto"}},this.renderBody())))}}]),e}(u.a.Component),mt=e.default=ft;h.a.render(u.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},33:function(t,e,n){},49:function(t,e,n){t.exports=n.p+"static/media/undo.42f85826.svg"},51:function(t,e,n){},66:function(t,e,n){t.exports=n.p+"static/media/beet.ee995698.svg"},67:function(t,e,n){t.exports=n.p+"static/media/carrot.2266c860.svg"},68:function(t,e,n){t.exports=n.p+"static/media/garlic.e1631c50.svg"},69:function(t,e,n){t.exports=n.p+"static/media/leek.f6dc4275.svg"},70:function(t,e,n){t.exports=n.p+"static/media/lettuce.bf643227.svg"},71:function(t,e,n){t.exports=n.p+"static/media/onion.6e5e1a95.svg"},72:function(t,e,n){t.exports=n.p+"static/media/peas.ec871284.svg"},73:function(t,e,n){t.exports=n.p+"static/media/radish.43c53b88.svg"},74:function(t,e,n){t.exports=n.p+"static/media/spinach.fb59bf7b.svg"},75:function(t,e,n){t.exports=n.p+"static/media/strawberry.b7931bae.svg"},76:function(t,e,n){t.exports=n.p+"static/media/tomato.4826181a.svg"},80:function(t,e,n){t.exports=n(131)},85:function(t,e,n){t.exports=n.p+"static/media/logo.25bf045c.svg"}},[[80,1,2]]]);
//# sourceMappingURL=main.691a1f3e.chunk.js.map