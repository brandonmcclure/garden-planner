(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},152:function(e,t,n){e.exports=n.p+"static/media/redo.d2107f44.svg"},155:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),l=(n(101),n(7)),c=n(8),s=n(14),u=n(12),d=n(26),h=n(13),p=n(167),m=n(166),f=(n(67),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{collapseOnSelect:!0,expand:"md",className:"bg-pastel-green"},r.a.createElement(p.a.Brand,{as:m.a.Link,onClick:function(){return e.props.handleSelectPage("designer")}},"Penny's Garden Planner"),r.a.createElement(p.a.Toggle,{"aria-controls":"navbar-actions"}),r.a.createElement(p.a.Collapse,{id:"navbar-actions"},r.a.createElement(m.a,{className:"mr-auto",activeKey:this.props.currentPageId,onSelect:function(t){return e.props.handleSelectPage(t)}},this.props.pages.map((function(e){return r.a.createElement(m.a.Link,{eventKey:e.id,key:e.id},e.label)})))))}}]),t}(r.a.Component)),b=n(94),g=n(33),y=n.n(g),v=n(48),k=n.n(v),w=n(28),O=n.n(w),j=n(39),E=(n(69),n(85)),C=n.n(E),P=n(60),S=n.n(P),N=n(43),R=n.n(N),I=n(47),G=n.n(I),x=[],A=function(){function e(t){Object(l.a)(this,e),this.id=t.id,this.rows=t.rows,this.cols=t.cols,this.fill=t.fill,this.styles={display:"grid",gridTemplateRows:"repeat(".concat(t.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(t.cols,", 1fr)"),position:"absolute",top:0,left:0,width:"100%",height:"100%"}}return Object(c.a)(e,null,[{key:"getObject",value:function(e){return x.find((function(t){return t.id===e}))}},{key:"allObjects",value:function(){return x}},{key:"loadObjectsFromApi",value:function(){fetch("/backend/layouts/").then((function(e){return 200===e.status?e.json():null})).then((function(t){t&&t.forEach((function(t){return x.push(new e(t))}))}))}}]),e}(),B=[],L=function(){function e(t){Object(l.a)(this,e),this.id=t.id,this.name=t.name,this.namePlural=t.name_plural,this.scientificName=t.scientific_name,this.layoutIds=t.layouts,this.goodNeighborIds=t.good_neighbors,this.badNeighborIds=t.bad_neighbors,this.className=t.name.toLowerCase().replace(/ /g,"-"),this.imageName=t.name.toLowerCase().replace(/ /g,"-"),this.defaultLayout=this.defaultLayout.bind(this)}return Object(c.a)(e,[{key:"defaultLayout",value:function(){return A.getObject(this.layoutIds[0])}}],[{key:"getObject",value:function(e){return B.find((function(t){return t.id===e}))}},{key:"allObjects",value:function(){return B}},{key:"loadObjectsFromApi",value:function(){fetch("/backend/plants/").then((function(e){return 200===e.status?e.json():null})).then((function(t){t&&t.forEach((function(t){return B.push(new e(t))}))}))}}]),e}(),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(l.a)(this,e),this.plant=t,this.layout=n,this.plantPickerOptionGroups=this.plantPickerOptionGroups.bind(this)}return Object(c.a)(e,[{key:"plantPickerOptionGroups",value:function(e){var t={},n=new Set,a=new Set,r=new Set;return 0===e.length?L.allObjects().forEach((function(e){return n.add(e.id)})):(L.allObjects().forEach((function(e){return a.add(e.id)})),e.forEach((function(e){e.goodNeighborIds.forEach((function(e){a.delete(e),n.add(e)}))})),e.forEach((function(e){e.badNeighborIds.forEach((function(e){a.delete(e),n.delete(e),r.add(e)}))}))),[["good",n],["neutral",a],["bad",r]].forEach((function(e){var n=Object(j.a)(e,2),a=n[0],r=n[1];r.size>0&&(t[a]=Array.from(r).map((function(e){return L.getObject(e)})))})),t}}]),e}(),D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={currentPlantGroup:Object.keys(e.plantGroups)[0]},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderClearPlotButton",value:function(){var e=this;if(this.props.plot.plant)return r.a.createElement(y.a,{block:!0,variant:"success",className:"mb-1",onClick:function(){return e.props.handleSelect(null,null)}},r.a.createElement("span",null,"Clear plot"))}},{key:"renderNeighbors",value:function(){if(this.props.neighborPlants.length>0){var e=Array.from(new Set(this.props.neighborPlants.map((function(e){return e.namePlural.toLowerCase()})))).sort();return r.a.createElement("span",{className:"text-wrap text-sm"},"Neighbors: ",e.join(", "))}}},{key:"renderFilters",value:function(){var e=this,t=Object.keys(this.props.plantGroups).length;if(t>1){var n={all:"All",good:"Compatible",neutral:"Neutral",bad:"Combative"},a={width:"".concat(Math.floor(96/t),"%")};return r.a.createElement("div",{className:"mb-2"},r.a.createElement(C.a,{type:"radio",name:"currentPlantGroupFilter",value:this.state.currentPlantGroup,onChange:function(t){e.setState({currentPlantGroup:t})},className:"bg-light w-100"},Object.entries(this.props.plantGroups).map((function(e){var t=Object(j.a)(e,2),o=t[0];t[1];return r.a.createElement(S.a,{size:"sm",className:"text-center",variant:"outline-success",value:o,key:o,style:a},n[o])}))))}}},{key:"renderPlantList",value:function(){var e=this,t=this.state.currentPlantGroup?this.props.plantGroups[this.state.currentPlantGroup]:[];return r.a.createElement(G.a,null,t.sort((function(e,t){return e.namePlural.localeCompare(t.namePlural)})).map((function(t){return r.a.createElement(G.a.Item,{action:!0,key:t.id,onClick:function(){return e.props.handleSelect(t,t.defaultLayout())}},r.a.createElement("span",null,t.namePlural,r.a.createElement("div",{className:"".concat(t.className," icon float-right")})))})))}},{key:"render",value:function(){return r.a.createElement(R.a,{show:this.props.show,onHide:this.props.handleHide,scrollable:!0},r.a.createElement(R.a.Header,{closeButton:!0,className:"bg-pastel-green"},"Plant Picker"),r.a.createElement(R.a.Body,null,this.renderClearPlotButton(),this.props.plot.plant?r.a.createElement("hr",null):null,this.renderNeighbors(),this.renderFilters(),this.renderPlantList()))}}]),t}(r.a.Component),T=(n(44),n(137),n(138),function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderPlants",value:function(){var e=this;if(this.props.plant){var t=function(e,t){return{gridArea:"".concat(e+1," / ").concat(t+1," / auto / auto")}};return this.props.layout.fill.map((function(n,a){var o=Object(j.a)(n,2),i=o[0],l=o[1];return r.a.createElement("div",{className:"plant",style:t(i,l),key:a},r.a.createElement("div",{className:"bg ".concat(e.props.plant.className)}))}))}}},{key:"render",value:function(){return r.a.createElement("button",{className:"plot",id:this.props.id,onClick:this.props.onClick},r.a.createElement("div",{className:"plants",style:this.props.layout?this.props.layout.styles:null},this.renderPlants()))}}]),t}(r.a.Component)),H=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"gridContainerStyles",value:function(){var e=Math.floor(.9*window.innerWidth/this.props.numCols),t=Math.floor(.7*window.innerHeight/this.props.numRows),n=Math.min(e,t),a=Math.max(n,60);return{width:"".concat(a*this.props.numCols,"px"),height:"".concat(a*this.props.numRows,"px")}}},{key:"gridStyles",value:function(){return{gridTemplateRows:"repeat(".concat(this.props.numRows,", 1fr)"),gridTemplateColumns:"repeat(".concat(this.props.numCols,", 1fr)")}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"gridContainer",style:this.gridContainerStyles()},r.a.createElement("div",{id:"grid",style:this.gridStyles()},this.props.grid.map((function(t,n){return t.map((function(t,a){var o="r".concat(n,"c").concat(a);return r.a.createElement(T,{key:o,id:o,plant:t.plant,layout:t.layout,onClick:function(){return e.props.handleGridClick(n,a)}})}))}))))}}]),t}(r.a.Component),F=(n(139),n(42)),M=n.n(F),z=n(61),W=n.n(z),J=n(62),K=n.n(J),U=n(86),Y=n.n(U),$=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(W.a,{"aria-label":"Controls",className:"justify-content-center"},r.a.createElement("div",{className:"d-flex flex-column m-1 p-0 border border-secondary rounded text-center text-nowrap"},r.a.createElement("span",{className:"badge badge-secondary rounded-0 w-100"},"Rows"),r.a.createElement(M.a,{"aria-label":"Add or delete rows"},t.renderDropdownButton("add-row-btn","Add",this.props.addRowOptions),t.renderDropdownButton("delete-row-btn","Delete",this.props.deleteRowOptions))),r.a.createElement("div",{className:"d-flex flex-column m-1 p-0 border border-secondary rounded text-center text-nowrap"},r.a.createElement("span",{className:"badge badge-secondary rounded-0 w-100"},"Columns"),r.a.createElement(M.a,{"aria-label":"Add or delete columns"},t.renderDropdownButton("add-col-btn","Add",this.props.addColOptions),t.renderDropdownButton("delete-col-btn","Delete",this.props.deleteColOptions))))}}],[{key:"renderDropdownButton",value:function(e,n,a){return r.a.createElement(Y.a,{id:e,title:n,disabled:!(a.length>1),variant:"outline-secondary",size:"sm"},t.renderDropdownItems(a))}},{key:"renderDropdownItems",value:function(e){return e.map((function(e,t){return r.a.createElement(K.a.Item,{key:t,onSelect:e.handleSelect},e.label)}))}}]),t}(r.a.Component),q=n(65),Q=n.n(q),V=(n(152),function(e){return Object(b.a)(Array(e).keys())}),X=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={numRows:4,numCols:4,grid:Array(4).fill().map((function(e){return new Array(4).fill().map((function(e){return new _}))})),showPlantPicker:!1},n.addRow=n.addRow.bind(Object(d.a)(n)),n.addCol=n.addCol.bind(Object(d.a)(n)),n.handleGridClick=n.handleGridClick.bind(Object(d.a)(n)),n.clickedRow=null,n.clickedCol=null,n.history=[],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){L.loadObjectsFromApi(),A.loadObjectsFromApi()}},{key:"renderUndo",value:function(){var e=this;if(0===this.history.length)return r.a.createElement(y.a,{variant:"outline-secondary",className:"disabled",disabled:!0},r.a.createElement("img",{src:Q.a}));return r.a.createElement(y.a,{variant:"outline-secondary",onClick:function(){e.undo()}},r.a.createElement("img",{src:Q.a}))}},{key:"undo",value:function(){var e=this.history.pop();this.setState((function(t){return{grid:e}}))}},{key:"getGridCopy",value:function(){return this.state.grid.map((function(e){return e.slice()}))}},{key:"handleGridClick",value:function(e,t){this.clickedRow=e,this.clickedCol=t,this.setState({showPlantPicker:!0})}},{key:"addRow",value:function(e){var t=this.state.numRows+1,n=this.state.grid.map((function(e){return e.slice()})),a=Array(this.state.numCols).fill().map((function(e){return new _}));n.splice(e,0,a),this.setState({numRows:t,grid:n})}},{key:"addRowOptions",value:function(){var e=this,t=function(t){return 0===t?"To top":t===e.state.numRows?"To bottom":"Insert below ".concat(t)};return V(this.state.numRows+1).map((function(n){return{label:t(n),handleSelect:e.addRow.bind(e,n)}}))}},{key:"deleteRow",value:function(e){this.setState((function(t){return{numRows:t.numRows-1,grid:t.grid.map((function(t,n){return n===e?null:t.slice()})).filter(Boolean)}}))}},{key:"deleteRowOptions",value:function(){var e=this,t=function(e){return String(e+1)};return V(this.state.numRows).map((function(n){return{label:t(n),handleSelect:e.deleteRow.bind(e,n)}}))}},{key:"addCol",value:function(e){var t=this.state.numCols+1,n=this.state.grid.map((function(e){return e.slice()}));n.forEach((function(t){return t.splice(e,0,new _)})),this.setState({numCols:t,grid:n})}},{key:"addColOptions",value:function(){var e=this,t=function(t){return 0===t?"To left":t===e.state.numCols?"To right":"Insert right of ".concat(t)};return V(this.state.numCols+1).map((function(n){return{label:t(n),handleSelect:e.addCol.bind(e,n)}}))}},{key:"deleteCol",value:function(e){this.setState((function(t){return{numCols:t.numCols-1,grid:t.grid.map((function(t){return t.map((function(t,n){return n===e?null:t})).filter(Boolean)}))}}))}},{key:"deleteColOptions",value:function(){var e=this,t=function(e){return String(e+1)};return V(this.state.numCols).map((function(n){return{label:t(n),handleSelect:e.deleteCol.bind(e,n)}}))}},{key:"handlePlantPickerSelection",value:function(e,t){var n=this.state.grid.map((function(e){return e.slice()})),a=n[this.clickedRow][this.clickedCol];Object.assign(a,{plant:e,layout:t}),this.clickedRow=null,this.clickedCol=null,this.setState({grid:n,showPlantPicker:!1})}},{key:"renderPlantPicker",value:function(){var e=this;if(!1===this.state.showPlantPicker)return null;var t=this.clickedRow,n=this.clickedCol,a=function(t,n){return e.state.grid[t][n].plant},o=[];[t-1,t,t+1].forEach((function(r){[n-1,n,n+1].forEach((function(i){(function(a,r){return a>=0&&a<e.state.numRows&&r>=0&&r<e.state.numCols&&"".concat(a,"_").concat(r)!=="".concat(t,"_").concat(n)})(r,i)&&a(r,i)&&o.push(a(r,i))}))}));var i=this.state.grid[t][n].plantPickerOptionGroups(o);return r.a.createElement(D,{show:!0,handleSelect:function(t,n){e.handlePlantPickerSelection(t,n)},handleHide:function(){e.setState({showPlantPicker:!1})},plantGroups:i,plot:this.state.grid[t][n],neighborPlants:o})}},{key:"render",value:function(){return r.a.createElement(k.a,{fluid:!0,className:"mt-2 p-1"},this.renderPlantPicker(),r.a.createElement(O.a,{className:"h-75"},r.a.createElement(O.a.Header,null,r.a.createElement($,{addRowOptions:this.addRowOptions(),deleteRowOptions:this.deleteRowOptions(),addColOptions:this.addColOptions(),deleteColOptions:this.deleteColOptions()})),r.a.createElement(O.a.Body,{className:"align-content-center m-2 overflow-auto p-0",style:{maxHeight:"70vh",overflowY:"auto"}},r.a.createElement(H,{grid:this.state.grid,numRows:this.state.numRows,numCols:this.state.numCols,handleGridClick:this.handleGridClick}))))}}]),t}(r.a.Component),Z=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement("h1",{class:"mt-5"},"About Penny's Garden Planner"),r.a.createElement("p",null,"Placeholder...fill this in later."))}}]),t}(r.a.Component),ee=n(35),te=n.n(ee),ne=(n(155),n(89)),ae=n.n(ne),re=n(90),oe=n.n(re),ie=n(91),le=n.n(ie),ce=n(92),se=n.n(ce),ue=n(93),de=n.n(ue),he=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(O.a.Header,{as:"h5"},"Penny"),r.a.createElement(O.a.Body,{className:"bg-dark"},r.a.createElement(te.a,null,r.a.createElement(te.a.Item,null,r.a.createElement("img",{src:le.a})),r.a.createElement(te.a.Item,null,r.a.createElement("img",{src:se.a})),r.a.createElement(te.a.Item,null,r.a.createElement("img",{src:ae.a})),r.a.createElement(te.a.Item,null,r.a.createElement("img",{src:oe.a})),r.a.createElement(te.a.Item,null,r.a.createElement("img",{src:de.a})))))}}]),t}(r.a.Component),pe=(n(159),function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={currentPageId:"designer"};var a=function(e,t){return{id:e,label:t}};return n.pages=[a("designer","Garden Planner"),a("about","About"),a("shrine","The Shrine")],n.handleSelectPage=n.handleSelectPage.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSelectPage",value:function(e){this.setState((function(t){return{currentPageId:e}}))}},{key:"renderBody",value:function(){return"designer"===this.state.currentPageId?r.a.createElement(X,null):"about"===this.state.currentPageId?r.a.createElement(Z,null):"shrine"===this.state.currentPageId?r.a.createElement(he,null):r.a.createElement("p",null,"No clue")}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,{pages:this.pages,currentPageId:this.state.currentPageId,handleSelectPage:this.handleSelectPage}),this.renderBody())}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},44:function(e,t,n){},65:function(e,t,n){e.exports=n.p+"static/media/undo.42f85826.svg"},67:function(e,t,n){},69:function(e,t,n){},89:function(e,t,n){e.exports=n.p+"static/media/Penny_1.5831e7f0.jpg"},90:function(e,t,n){e.exports=n.p+"static/media/Penny_2.c0360f33.jpg"},91:function(e,t,n){e.exports=n.p+"static/media/Penny_3.5e036fdc.jpg"},92:function(e,t,n){e.exports=n.p+"static/media/Penny_4.ba0f8021.jpg"},93:function(e,t,n){e.exports=n.p+"static/media/Penny_5.825f553d.jpg"},96:function(e,t,n){e.exports=n(160)}},[[96,1,2]]]);
//# sourceMappingURL=main.d0549172.chunk.js.map