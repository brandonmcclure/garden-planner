(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},152:function(e,t,n){},157:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),l=n.n(o),i=(n(99),n(7)),c=n(8),s=n(14),u=n(12),d=n(26),h=n(13),p=n(162),m=n(161),f=(n(65),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{collapseOnSelect:!0,expand:"md",className:"bg-pastel-green"},r.a.createElement(p.a.Brand,{as:m.a.Link,onClick:function(){return e.props.handleSelectPage("designer")}},"Penny's Garden Planner"),r.a.createElement(p.a.Toggle,{"aria-controls":"navbar-actions"}),r.a.createElement(p.a.Collapse,{id:"navbar-actions"},r.a.createElement(m.a,{className:"mr-auto",activeKey:this.props.currentPageId,onSelect:function(t){return e.props.handleSelectPage(t)}},this.props.pages.map((function(e){return r.a.createElement(m.a.Link,{eventKey:e.id,key:e.id},e.label)})))))}}]),t}(r.a.Component)),b=n(93),g=n(46),y=n.n(g),w=n(28),v=n.n(w),k=n(38),O=(n(67),n(44)),E=n.n(O),j=n(83),C=n.n(j),P=n(59),S=n.n(P),N=n(47),R=n.n(N),G=n(62),I=n.n(G),L=[],x=function(){function e(t){Object(i.a)(this,e),this.id=t.id,this.rows=t.rows,this.cols=t.cols,this.fill=t.fill,this.styles={display:"grid",gridTemplateRows:"repeat(".concat(t.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(t.cols,", 1fr)"),position:"absolute",top:0,left:0,width:"100%",height:"100%"}}return Object(c.a)(e,null,[{key:"getObject",value:function(e){return L.find((function(t){return t.id===e}))}},{key:"allObjects",value:function(){return L}},{key:"loadObjectsFromApi",value:function(){fetch("/backend/layouts/").then((function(e){return 200===e.status?e.json():null})).then((function(t){t&&t.forEach((function(t){return L.push(new e(t))}))}))}}]),e}(),B=[],A=function(){function e(t){Object(i.a)(this,e),this.id=t.id,this.name=t.name,this.namePlural=t.name_plural,this.scientificName=t.scientific_name,this.layoutIds=t.layouts,this.goodNeighborIds=t.good_neighbors,this.badNeighborIds=t.bad_neighbors,this.className=t.name.toLowerCase().replace(/ /g,"-"),this.imageName=t.name.toLowerCase().replace(/ /g,"-"),this.defaultLayout=this.defaultLayout.bind(this)}return Object(c.a)(e,[{key:"defaultLayout",value:function(){return x.getObject(this.layoutIds[0])}}],[{key:"getObject",value:function(e){return B.find((function(t){return t.id===e}))}},{key:"allObjects",value:function(){return B}},{key:"loadObjectsFromApi",value:function(){fetch("/backend/plants/").then((function(e){return 200===e.status?e.json():null})).then((function(t){t&&t.forEach((function(t){return B.push(new e(t))}))}))}}]),e}(),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(i.a)(this,e),this.plant=t,this.layout=n}return Object(c.a)(e,null,[{key:"neighbors",value:function(e,t,n){var a=n.length,r=n[0].length,o=[];return[e-1,e,e+1].forEach((function(l){[t-1,t,t+1].forEach((function(i){(function(n,o){return n>=0&&n<a&&o>=0&&o<r&&"".concat(n,"_").concat(o)!=="".concat(e,"_").concat(t)})(l,i)&&o.push(n[l][i])}))})),o}},{key:"plantPickerGroups",value:function(t,n,a){var r=e.neighbors(t,n,a).map((function(e){return e.plant})).filter(Boolean),o={},l=new Set,i=new Set,c=new Set;return 0===r.length?A.allObjects().forEach((function(e){return l.add(e.id)})):(A.allObjects().forEach((function(e){return i.add(e.id)})),r.forEach((function(e){e.goodNeighborIds.forEach((function(e){i.delete(e),l.add(e)}))})),r.forEach((function(e){e.badNeighborIds.forEach((function(e){i.delete(e),l.delete(e),c.add(e)}))}))),[["good",l],["neutral",i],["bad",c]].forEach((function(e){var t=Object(k.a)(e,2),n=t[0],a=t[1];a.size>0&&(o[n]=Array.from(a).map((function(e){return A.getObject(e)})))})),o}}]),e}(),_=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={currentPlantGroup:Object.keys(e.plantGroups)[0]},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderClearPlotButton",value:function(){var e=this;if(this.props.plot.plant)return r.a.createElement(E.a,{block:!0,variant:"success",className:"mb-1",onClick:function(){return e.props.handleSelect(null,null)}},r.a.createElement("span",null,"Clear plot"))}},{key:"renderNeighbors",value:function(){var e=this.props.neighbors.map((function(e){return e.plant})).filter(Boolean);if(e.length>0){var t=Array.from(new Set(e.map((function(e){return e.namePlural.toLowerCase()})))).sort().join(", ");return r.a.createElement("span",{className:"text-wrap text-sm"},"Neighbors: ",t)}}},{key:"renderFilters",value:function(){var e=this,t=Object.keys(this.props.plantGroups).length;if(t>1){var n={all:"All",good:"Compatible",neutral:"Neutral",bad:"Combative"},a={width:"".concat(Math.floor(96/t),"%")};return r.a.createElement("div",{className:"mb-2"},r.a.createElement(C.a,{type:"radio",name:"currentPlantGroupFilter",value:this.state.currentPlantGroup,onChange:function(t){e.setState({currentPlantGroup:t})},className:"bg-light w-100"},Object.entries(this.props.plantGroups).map((function(e){var t=Object(k.a)(e,2),o=t[0];t[1];return r.a.createElement(S.a,{size:"sm",className:"text-center",variant:"outline-success",value:o,key:o,style:a},n[o])}))))}}},{key:"renderPlantList",value:function(){var e=this,t=this.state.currentPlantGroup?this.props.plantGroups[this.state.currentPlantGroup]:[];return r.a.createElement(I.a,null,t.sort((function(e,t){return e.namePlural.localeCompare(t.namePlural)})).map((function(t){return r.a.createElement(I.a.Item,{action:!0,key:t.id,onClick:function(){return e.props.handleSelect(t,t.defaultLayout())}},r.a.createElement("span",null,t.namePlural,r.a.createElement("div",{className:"".concat(t.className," icon float-right")})))})))}},{key:"render",value:function(){return r.a.createElement(R.a,{show:this.props.show,onHide:this.props.handleHide,scrollable:!0},r.a.createElement(R.a.Header,{closeButton:!0,className:"bg-pastel-green"},"Plant Picker"),r.a.createElement(R.a.Body,null,this.renderClearPlotButton(),this.props.plot.plant?r.a.createElement("hr",null):null,this.renderNeighbors(),this.renderFilters(),this.renderPlantList()))}}]),t}(r.a.Component),F=(n(41),n(135),n(136),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderPlants",value:function(){if(this.props.plant){var e="bg ".concat(this.props.plant.className),t=function(e,t){return{gridArea:"".concat(e+1," / ").concat(t+1," / auto / auto")}};return this.props.layout.fill.map((function(n,a){var o=Object(k.a)(n,2),l=o[0],i=o[1];return r.a.createElement("div",{className:"plant",style:t(l,i),key:a},r.a.createElement("div",{className:e}))}))}}},{key:"render",value:function(){return r.a.createElement("button",{className:"plot",id:this.props.id,onClick:this.props.onClick},r.a.createElement("div",{className:"plants",style:this.props.layout?this.props.layout.styles:null},this.renderPlants()))}}]),t}(r.a.Component)),D=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"gridContainerStyles",value:function(){var e=Math.floor(.9*window.innerWidth/this.props.numCols),t=Math.floor(.7*window.innerHeight/this.props.numRows),n=Math.min(e,t),a=Math.max(n,60);return{width:"".concat(a*this.props.numCols,"px"),height:"".concat(a*this.props.numRows,"px")}}},{key:"gridStyles",value:function(){return{gridTemplateRows:"repeat(".concat(this.props.numRows,", 1fr)"),gridTemplateColumns:"repeat(".concat(this.props.numCols,", 1fr)")}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"gridContainer",style:this.gridContainerStyles()},r.a.createElement("div",{id:"grid",style:this.gridStyles()},this.props.grid.map((function(t,n){return t.map((function(t,a){var o="r".concat(n,"c").concat(a);return r.a.createElement(F,{key:o,id:o,plant:t.plant,layout:t.layout,onClick:function(){return e.props.handleGridClick(n,a)}})}))}))))}}]),t}(r.a.Component),H=(n(137),n(45)),M=n.n(H),z=n(87),W=n.n(z),J=n(60),K=n.n(J),Y=n(84),$=n.n(Y),q=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).btnGroupContainerClass="d-flex flex-column m-1 p-0 border border-secondary rounded text-center text-nowrap",n.btnGroupLabelClass="badge badge-secondary rounded-0 w-100",n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderDropdownButton",value:function(e,t,n){return r.a.createElement($.a,{id:e,title:t,disabled:!(n.length>1),variant:"outline-secondary",size:"sm"},n.map((function(e,t){return r.a.createElement(K.a.Item,{key:t,onSelect:e.handleSelect},e.label)})))}},{key:"render",value:function(){return r.a.createElement(W.a,{"aria-label":"Controls",className:"justify-content-center"},r.a.createElement("div",{className:this.btnGroupContainerClass},r.a.createElement("span",{className:this.btnGroupLabelClass},"Rows"),r.a.createElement(M.a,{"aria-label":"Add or delete rows"},this.renderDropdownButton("add-row-btn","Add",this.props.addRowOptions),this.renderDropdownButton("delete-row-btn","Delete",this.props.deleteRowOptions))),r.a.createElement("div",{className:this.btnGroupContainerClass},r.a.createElement("span",{className:this.btnGroupLabelClass},"Columns"),r.a.createElement(M.a,{"aria-label":"Add or delete columns"},this.renderDropdownButton("add-col-btn","Add",this.props.addColOptions),this.renderDropdownButton("delete-col-btn","Delete",this.props.deleteColOptions))))}}]),t}(r.a.Component),Q=function(e){return Object(b.a)(Array(e).keys())},U=function(e){return new Array(e).fill().map((function(e){return new T}))},V=function(e,t){return Array(e).fill().map((function(e){return U(t)}))},X=function(e){return e.map((function(e){return e.slice()}))},Z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={numRows:4,numCols:4,grid:V(4,4),showPlantPicker:!1},n.handleGridClick=n.handleGridClick.bind(Object(d.a)(n)),n.addRow=n.addRow.bind(Object(d.a)(n)),n.addCol=n.addCol.bind(Object(d.a)(n)),n.clickedRow=null,n.clickedCol=null,n.history=[],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){A.loadObjectsFromApi(),x.loadObjectsFromApi()}},{key:"handleGridClick",value:function(e,t){this.clickedRow=e,this.clickedCol=t,this.setState({showPlantPicker:!0})}},{key:"addRow",value:function(e){var t=this.state.numRows+1,n=X(this.state.grid);n.splice(e,0,U(this.state.numCols)),this.setState({numRows:t,grid:n})}},{key:"addRowOptions",value:function(){var e=this,t=function(t){return 0===t?"To top":t===e.state.numRows?"To bottom":"Insert below ".concat(t)};return Q(this.state.numRows+1).map((function(n){return{label:t(n),handleSelect:e.addRow.bind(e,n)}}))}},{key:"deleteRow",value:function(e){this.setState((function(t){return{numRows:t.numRows-1,grid:t.grid.map((function(t,n){return n===e?null:t.slice()})).filter(Boolean)}}))}},{key:"deleteRowOptions",value:function(){var e=this,t=function(e){return String(e+1)};return Q(this.state.numRows).map((function(n){return{label:t(n),handleSelect:e.deleteRow.bind(e,n)}}))}},{key:"addCol",value:function(e){var t=this.state.numCols+1,n=X(this.state.grid);n.forEach((function(t){return t.splice(e,0,new T)})),this.setState({numCols:t,grid:n})}},{key:"addColOptions",value:function(){var e=this,t=function(t){return 0===t?"To left":t===e.state.numCols?"To right":"Insert right of ".concat(t)};return Q(this.state.numCols+1).map((function(n){return{label:t(n),handleSelect:e.addCol.bind(e,n)}}))}},{key:"deleteCol",value:function(e){this.setState((function(t){return{numCols:t.numCols-1,grid:t.grid.map((function(t){return t.map((function(t,n){return n===e?null:t})).filter(Boolean)}))}}))}},{key:"deleteColOptions",value:function(){var e=this,t=function(e){return String(e+1)};return Q(this.state.numCols).map((function(n){return{label:t(n),handleSelect:e.deleteCol.bind(e,n)}}))}},{key:"handlePlantPickerSelection",value:function(e,t){var n=X(this.state.grid),a=n[this.clickedRow][this.clickedCol];Object.assign(a,{plant:e,layout:t}),this.clickedRow=null,this.clickedCol=null,this.setState({grid:n,showPlantPicker:!1})}},{key:"renderPlantPicker",value:function(){var e=this;if(this.state.showPlantPicker){var t=this.clickedRow,n=this.clickedCol;return r.a.createElement(_,{show:!0,handleSelect:function(t,n){e.handlePlantPickerSelection(t,n)},handleHide:function(){e.setState({showPlantPicker:!1})},plantGroups:T.plantPickerGroups(t,n,this.state.grid),plot:this.state.grid[t][n],neighbors:T.neighbors(t,n,this.state.grid)})}}},{key:"render",value:function(){return r.a.createElement(y.a,{fluid:!0,className:"mt-2 p-1"},this.renderPlantPicker(),r.a.createElement(v.a,{className:"h-75"},r.a.createElement(v.a.Header,null,r.a.createElement(q,{addRowOptions:this.addRowOptions(),deleteRowOptions:this.deleteRowOptions(),addColOptions:this.addColOptions(),deleteColOptions:this.deleteColOptions()})),r.a.createElement(v.a.Body,{className:"align-content-center m-2 overflow-auto p-0",style:{maxHeight:"70vh",overflowY:"auto"}},r.a.createElement(D,{grid:this.state.grid,numRows:this.state.numRows,numCols:this.state.numCols,handleGridClick:this.handleGridClick}))))}}]),t}(r.a.Component);function ee(e){var t=e.authorLink,n=e.authorTitle,a=e.authorLabel;return r.a.createElement("div",null,"Icons made by ",r.a.createElement("a",{href:t,title:n},a)," from ",r.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com"))}var te=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement("h1",{className:"mt-5"},"About Penny's Garden Planner"),r.a.createElement("p",null,"Placeholder...fill this in later."),r.a.createElement("p",null,"Credit..."),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(ee,{authorLabel:"Smashicons",authorTitle:"Smashicons",authorLink:"https://www.flaticon.com/authors/smashicons"}),r.a.createElement(ee,{authorLabel:"Freepik",authorTitle:"Freepik",authorLink:"https://www.flaticon.com/authors/freepik"}),r.a.createElement(ee,{authorLabel:"wanicon",authorTitle:"wanicon",authorLink:"https://www.flaticon.com/authors/wanicon"}),r.a.createElement(ee,{authorLabel:"mynamepong",authorTitle:"mynamepong",authorLink:"https://www.flaticon.com/authors/mynamepong"})))}}]),t}(r.a.Component),ne=n(34),ae=n.n(ne),re=(n(152),n(88)),oe=n.n(re),le=n(89),ie=n.n(le),ce=n(90),se=n.n(ce),ue=n(91),de=n.n(ue),he=n(92),pe=n.n(he),me=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(v.a.Header,{as:"h5"},"Penny"),r.a.createElement(v.a.Body,{className:"bg-dark"},r.a.createElement(ae.a,null,r.a.createElement(ae.a.Item,null,r.a.createElement("img",{src:se.a,alt:"Penny pic #1"})),r.a.createElement(ae.a.Item,null,r.a.createElement("img",{src:de.a,alt:"Penny pic #2"})),r.a.createElement(ae.a.Item,null,r.a.createElement("img",{src:oe.a,alt:"Penny pic #3"})),r.a.createElement(ae.a.Item,null,r.a.createElement("img",{src:ie.a,alt:"Penny pic #4"})),r.a.createElement(ae.a.Item,null,r.a.createElement("img",{src:pe.a,alt:"Penny pic #5"})))))}}]),t}(r.a.Component),fe=(n(156),function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={currentPageId:"designer"};var a=function(e,t){return{id:e,label:t}};return n.pages=[a("designer","Garden Planner"),a("about","About"),a("shrine","The Shrine")],n.handleSelectPage=n.handleSelectPage.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSelectPage",value:function(e){this.setState((function(t){return{currentPageId:e}}))}},{key:"renderBody",value:function(){return"designer"===this.state.currentPageId?r.a.createElement(Z,null):"about"===this.state.currentPageId?r.a.createElement(te,null):"shrine"===this.state.currentPageId?r.a.createElement(me,null):r.a.createElement("p",null,"No clue")}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,{pages:this.pages,currentPageId:this.state.currentPageId,handleSelectPage:this.handleSelectPage}),this.renderBody())}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},41:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},88:function(e,t,n){e.exports=n.p+"static/media/Penny_1.5831e7f0.jpg"},89:function(e,t,n){e.exports=n.p+"static/media/Penny_2.c0360f33.jpg"},90:function(e,t,n){e.exports=n.p+"static/media/Penny_3.5e036fdc.jpg"},91:function(e,t,n){e.exports=n.p+"static/media/Penny_4.ba0f8021.jpg"},92:function(e,t,n){e.exports=n.p+"static/media/Penny_5.825f553d.jpg"},94:function(e,t,n){e.exports=n(157)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.844a3b4b.chunk.js.map